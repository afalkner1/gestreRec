<!DOCTYPE html>
<!-- Template by Quackit.com -->
<!-- Images by various sources under the Creative Commons CC0 license and/or the Creative Commons Zero license.
Although you can use them, for a more unique website, replace these images with your own. -->
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Dance Rec</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link rel="stylesheet" href="/static/css/custom.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom Fonts from Google -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

</head>
<body>

    <!-- Navigation -->
    <nav id="siteNav" class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Logo and responsive toggle -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{{ url_for('index') }}">
                	<span class="glyphicon glyphicon-fire"></span>
                	DanceRec
                </a>
            </div>
            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="{{ url_for('index') }}">Home</a>
                    </li>
                    <li>
                        <a href="{{ url_for('scoreboard') }}">Scoreboard</a>
                    </li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Services <span class="caret"></span></a>
						<ul class="dropdown-menu" aria-labelledby="about-us">
							<li><a href="#">Engage</a></li>
							<li><a href="#">Pontificate</a></li>
							<li><a href="#">Synergize</a></li>
						</ul>
					</li>
                    <li>
                        <a href="#contact">Contact</a>
                    </li>
                </ul>

            </div><!-- /.navbar-collapse -->
        </div><!-- /.container -->
    </nav>

        <section class="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                	<h2 class="section-header">Your Score</h2>
                    <p class="lead text-muted">Here is your average score: {{ variable }} / 10  </p>
                	<p class="lead text-muted">Enter your name to add your score to the scoreboard. </p>
                    <div class = "score">
                        <form>
                            <input type="text" name="value" id='value' required placeholder="Name">
                            <input type=button value="Submit" onClick="createTable({{ variable }})">
                        </form>
                    </div>
                    <div id="tab"></div>
                </div>
            </div>
        </div>
    </section>

        <!-- Footer -->
    <section id="contact">
    <footer class="page-footer">

    	<!-- Contact Us -->
        <div class="contact">
        	<div class="container">
				<h2 class="section-heading">Contact Us</h2>
				<p><span class="glyphicon glyphicon-earphone"></span><br> +1(860) 373 4658</p>
				<p><span class="glyphicon glyphicon-envelope"></span><br> alex.falkner@vanderbilt.edu</p>
        	</div>
        </div>

        <!-- Copyright etc -->
        <div class="small-print">
        	<div class="container">
        		<p>Copyright &copy; Alexandra Falkner, Rob Lee 2021</p>
        	</div>
        </div>

    </footer>
        </section>
    <!-- jQuery -->
    <script src="{{ url_for('static', filename='js/jquery-1.11.3.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="{{ url_for('static', filename='js/jquery.easing.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>

</body>

</html>

<script>

function createTable(scored) {

	var typename = document.getElementById('value').value;
 	var name = typename + ", ";
    var score = scored + ", ";
    var date = new Date().toLocaleDateString();
    var date_f = date + ", ";

    var oldNames = localStorage.getItem("names");
    var oldScores = localStorage.getItem("scores");
    var oldDates = localStorage.getItem("dates");

    if(oldDates === null) oldDates = "";
    if(oldNames === null) oldNames = "";
    if(oldScores === null) oldScores = "";

    var newNames = oldNames + name;
    var newScores = oldScores + score
    var newDates = oldDates + date_f

	localStorage.setItem("names", oldNames + name);
    localStorage.setItem("scores", oldScores + score);
    localStorage.setItem("dates", oldDates + date_f);

    var table = document.getElementById('Div1');

    // Create an empty <tr> element and add it to the 1st position of the table:
    var row = table.insertRow(0);
    row.setAttribute("id", "newrow");

    // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);

    // Add some text to the new cells:
    cell1.innerHTML = typename;
    cell2.innerHTML = scored;
    cell3.innerHTML = date;

    sortTable();


}

function showOld(){

    var tab = 'tab';
    var oldNames = localStorage.getItem("names");
    var oldScores = localStorage.getItem("scores");
    var oldDates = localStorage.getItem("dates");
    if(oldNames === null) oldNames = "";
    if(oldScores === null) oldScores = "";
    if(oldDates === null) oldDates = "";

	var schoolArr = oldNames.split(',');
	var pctArr = oldScores.split(',');
	var dateArr = oldDates.split(',');

  var tar = document.getElementById(tab);
  var table = document.createElement('TABLE');
  table.setAttribute("id", "Div1");
  var tbdy = document.createElement('TBODY');
  table.appendChild(tbdy);
  for (var j = 0; j < schoolArr.length ; j++) {
    var tr = document.createElement('TR');
    tbdy.appendChild(tr);
    for (var k = 0; k < 3; k++) {
      var td = document.createElement('TD');
      td.width = '100';
      if (k == 0) td.innerHTML = schoolArr[j];
      else if (k == 2) td.innerHTML = dateArr[j];
      else {
          td.innerHTML = pctArr[j];
      }
      tr.appendChild(td);
    }
  }
  tar.appendChild(table);
  sortTable();

}
showOld();

function sortTable() {
    var table, i, x, y;
    table = document.getElementById('Div1');
    var switching = true;

                // Run loop until no switching is needed
    while (switching) {
        switching = false;
        var rows = table.rows;

                    // Loop to go through all rows
        for (i = 0; i < (rows.length - 1); i++) {
            var Switch = false;

                        // Fetch 2 elements that need to be compared
            x = rows[i].getElementsByTagName("TD")[1];
            y = rows[i + 1].getElementsByTagName("TD")[1];

                        // Check if 2 rows need to be switched
            if (Number(x.innerHTML)> Number(y.innerHTML))
            {

                            // If yes, mark Switch as needed and break loop
                Switch = true;
                break;
            }
        }
        if (Switch) {
                        // Function to switch rows and mark switch as completed
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
        }
    }
}


</script>

<style>
table tr#newrow  {background-color:yellowgreen; color:white;}

table {
  border-spacing: 0;
  width: 100%;
}

th, td {
  text-align: left;
  padding: 16px;
}

tr:nth-child(even) {
  background-color: #f2f2f2
}
.score{
   padding: 16px;
}

input[type=text] {

  color: black;
  padding: 16px 32px;
  text-decoration: none;
  margin: 4px 2px;
  cursor: pointer;

    padding:5px;
    border:2px solid #ccc;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

input[type=text]:hover {
    background-color:#f2f2f2;
    border-color:grey;
}

input[type=button]:hover {
    background-color:yellowgreen;
    color:white;

}

input[type=text]:focus {
    border-color:grey;
}

input[type=button] {
    padding:5px 15px;
    background:#ccc;
    border:0 none;
    cursor:pointer;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}


</style>

